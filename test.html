def call(
    String patchLocation,
    String user,
    String password,
    String server,
    String defaultSchema = 'FCJ'
) {
    echo 'Rolling back SQL'
    sh """
        if [[ -f ${patchLocation}/rollback/sqlRollbackScript.sh ]]
        then
            cd ${patchLocation}/rollback/
            source ./sqlRollbackScript.sh ${user} ${password} ${server}
        else
            echo "No SQL part"
        fi
		
		if grep -F -q SP2- rollback*.log; then
			grep SP2- rollback*.log
			printf "Syntax error in SQL script!!!"
			exit 1
		fi
    """

    sh """
        if [[ -f ${patchLocation}/rollback/recompile_invalids.sh ]]
        then
            cd ${patchLocation}/rollback/
            source ./recompile_invalids.sh ${user}[${defaultSchema}]/${password} ${server}
        else
            echo "No SQL part"
        fi
    """

    echo 'Rolled back SQL'
}
