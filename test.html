def call(
	String credName,
    String ymlFile,
    String invFile
) {

	//sh "source ${env.WORK_FOLDER}/jenkins/ansible_inventory/replace_in_file.sh ${invFile}.exception ${ymlFile}"
    withCredentials([usernamePassword(credentialsId: "${credName}", usernameVariable: 'v_USER', passwordVariable: 'v_PASS')]) {
	
		sh """
            if [[ -f ${ymlFile}.yml ]]
            then
				cat ${ymlFile}.yml
				cat ${invFile}
                /usr/bin/ansible-playbook --extra-vars="{\'ansible_user\': ${v_USER}, \'ansible_password\': ${v_PASS}}" ${ymlFile}.yml -i "${invFile}"
            else
                echo "No Adapter restart required"
            fi
        """
    }
}
