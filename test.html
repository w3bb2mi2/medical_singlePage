select d_path
into v_res
from (
    select level, d.*, p_owner || '.' || p_object_name || SYS_CONNECT_BY_PATH(owner || '.' || name, '<--') d_path
    from table(CHECK_RESTART_ADAPTERS.fn_references_tab(p_owner, p_object_name)) d
    where owner in ('FCCBLAMADP', 'FCCADPRO', 'FCCADP', 'FCC2BRSINADP') 
        and TYPE in ('PACKAGE BODY', 'PACKAGE', 'SYNONYM') 
        and referenced_name = p_object_name 
        and referenced_owner = p_owner
    connect by prior name = referenced_name and prior owner = referenced_owner
)
where rownum = 1
and level < 100; -- Ограничение глубины рекурсии, чтобы избежать циклов
